<div class='black_out' *ngIf='black_out'></div>
<div class='header'>
    Geo-Context and COVID-19 in Missouri

    <div class='task_container' >

        <div *ngIf='this.task1'>
            Task 1/3:<br>
            Visualize the risk assessment of risk categories Susceptibility, Transmission, and Socioeconomic. What is the risk total of Boone County?
        </div>
        <div class='task_start' *ngIf='this.task1_start' (click)='start_task1("RCT01")'>
            Start Task
        </div>
        <div class='task_stop' *ngIf='this.task1_stop' (click)='stop_task1("RCT01")'>
            Complete Task
        </div>


        <div *ngIf='this.task2'>
            Task 2/3:<br>
            Generate a Susceptibility risk assessment and adjust the Rural-Urban Continuum filter to be between 2 and 7. What is the county with the second-to-last, lowest risk value?
        </div>
        <div class='task_start' *ngIf='this.task2_start' (click)='start_task2("RCT02")'>
            Start Task
        </div>
        <div class='task_stop' *ngIf='this.task2_stop' (click)='stop_task2("RCT02")'>
            Complete Task
        </div>



        <div *ngIf='this.task3'>
            Task 3/3:<br>
            Generate a risk assessment with all risk factors and remove the Rural-Urban Continuum filter.
        </div>
        <br>
        <div class='task_start' *ngIf='this.task3_start' (click)='start_task3("RCT03")'>
            Start Task
        </div>
        <div class='task_stop' *ngIf='this.task3_stop' (click)='stop_task3("RCT03")'>
            Complete Task
        </div>



        <div *ngIf='this.exploration'>
          Open Exploration:<br>
        Take a few minutes to explore the dashboard.
        </div>
        <div class='task_start' *ngIf='this.exploration_start' (click)='start_exploration("RCT_EX")'>
            Explore 
        </div>
        <div class='task_stop' *ngIf='this.exploration_stop' (click)='stop_exploration("RCT_EX")'>
            Stop Explore
        </div>

        <div *ngIf='this.survey'>
            You have completed the task analysis for the risk categories dashboard.
            <div class='survey_start' (click)='startSurvey()'>
                Start Risk Categories Survey
            </div>
        </div>



    </div> 



</div>
    
<div class='nav_bar'>
    <ul class='tabrow'>
        <!-- <li routerLink="/categories" routerLinkActive="active" class="selected"> Risk Categories</li>
        <li routerLink="/counties" routerLinkActive="active" > Counties</li>
        <li routerLink="/datasources" routerLinkActive="active" > Data Sources</li>
        <li routerLink="/howtouse" routerLinkActive="active" > How to use</li> -->


        
        <li routerLink="/categories"  class="selected"> Risk Categories</li>
        <li routerLink="/counties" > Counties</li>
        <li routerLink="/datasources" > Data Sources</li>
        <li routerLink="/howtouse" > How to use</li>


    </ul> 
</div> 

<div class='main_container'>

    <div class='columns'>
        <div class='column is-3'>
            <br>
            <div class="alignright">
                <div class="instructions">
                    Select/ Deselect risk categories
                    <br> and generate risk assessment.
                </div>
            </div>

            <div class="alignright">
            

                <div class='main_button button_blue' [ngClass]="{'main_button1 button_blue_selected' : risk_factors.Accessibility==1}" (click)='updateTotals("Accessibility")'>
                    Accessibility
                    <span *ngIf='risk_factors.Accessibility==1'><i class="mdi mdi-check-bold" ></i></span>
                </div>

                <div class='main_button button_blue' [ngClass]="{'main_button1 button_blue_selected' : risk_factors.Exposure==1}" (click)='updateTotals("Exposure")'>
                    Exposure
                    <span *ngIf='risk_factors.Exposure==1'><i class="mdi mdi-check-bold" ></i></span>
                </div>

                <div class='main_button button_blue' [ngClass]="{'main_button1 button_blue_selected' : risk_factors.Health_resources==1}" (click)='updateTotals("Health_resources")'>
                    Health Resources
                    <span *ngIf='risk_factors.Health_resources==1'><i class="mdi mdi-check-bold" ></i></span>
                </div>

                <div  class='main_button button_blue' [ngClass]="{'main_button1 button_blue_selected' : risk_factors.Socioeconomic==1}" (click)='updateTotals("Socioeconomic")'>
                    Socioeconomic  
                    <span *ngIf='risk_factors.Socioeconomic==1'><i class="mdi mdi-check-bold" ></i></span>
                </div>

                <div  class='main_button button_blue' [ngClass]="{'main_button1 button_blue_selected' : risk_factors.Susceptibility==1}" (click)='updateTotals("Susceptibility")'>
                    Susceptibility
                    <span *ngIf='risk_factors.Susceptibility==1'><i class="mdi mdi-check-bold" ></i></span>
                </div>
                <div class='main_button button_blue' [ngClass]="{'main_button1 button_blue_selected' : risk_factors.Transmission==1}" (click)='updateTotals("Transmission")'>
                    Transmission
                    <span *ngIf='risk_factors.Transmission==1'><i class="mdi mdi-check-bold" ></i></span>
                </div>
                <br>
                <br>
                <div class="sel_de" (click)='selectAll()'><i class="mdi mdi-checkbox-multiple-marked" ></i>&nbsp;Select All </div>
                <div class="sel_de" (click)='unselectAll()'><i class="mdi  mdi-checkbox-multiple-blank" ></i>&nbsp;Unselect All </div>
               
                
            </div>
        
        </div>
        <div class='column'>
            <div class='map_header'>
                Missouri County Risk Assessment
            </div>

            <div class='columns'>
                <div class='column'>
                    <span class='bold_font'>Risk Factors:</span>  {{map_title}}
                    <div *ngIf="this.filter1.toggle">
                        <span class='bold_font'>Filter:</span> {{this.filter1.display}} values between {{this.filter1.min_value}} and {{this.filter1.max_value}} 
                    </div>
                </div>
                <div class='column is-4'>
                    <img src="../../assets/legend.png">
                </div>
            </div>
           
           

            <div class='map_loading'>
                <div *ngIf='spinnertogg' class='loading'>
                    <ngx-spinner bdColor = "rgba(0,0,0,0)" size = "medium" color = "#000000" type = "ball-spin-clockwise-fade-rotating" [fullScreen] = "false">
                    </ngx-spinner>
                </div>
                <div id="cat_map" class="cat_map"></div>
            
                    
            </div>   

            
        </div>
        <div class='column is-4'>
            <div class='map_header'>
                &nbsp;
            </div>
            <table>
                <tr>
                  <th>Filtered by:</th>
                </tr>
                <tr>
                  <td>
                    <div *ngIf='!filter1.toggle' style='height:280px'>
                        Choose a filter:
                        <select id="filter_select" (change)="selectFilter($event)" >
                            <option value=''>Select a Filter</option>
                            <option value='RUCC_2013'>Rural-Urban Continuum</option>
                        </select>
                    </div>
                    <div style='height:280px' *ngIf='filter1.toggle'>
                        <div class='custom-slider'>
                            
                            <span class='filter_title'>{{this.filter1.display}}</span>
                            
                            <div class="close" (click)="dropFilter()"><i class="mdi mdi-close-box-outline" ></i></div>
                            <ng5-slider [(value)]="filter1.min_value" [(highValue)]="filter1.max_value" [options]="filter1.options" (userChange)="onUserChange($event)"></ng5-slider>
                        </div>

                        "ERS Rural-Urban Continuum Codes distinguish metropolitan (metro) counties 
                        by the population size of their metro area, and nonmetropolitan (nonmetro) 
                        counties by degree of urbanization and adjacency to metro areas" (ERS <a href="https://www.ers.usda.gov/data-products/rural-urban-continuum-codes/documentation/">Link</a>) 
                        <br>
                    </div>
                </td>
                </tr>
              </table>

              <div class='bars_title'>
                        
                Counties ordered by the highest risk total &nbsp;&nbsp;&nbsp;

            </div> 
            <div class="bars_scroll">
                <div class="columns">
                    <div class="column">
                        <div *ngFor='let factors of bar_bars'>
                            <div class='bars_plot'>
                                <plotly-plot [data]="factors.data" [layout]="factors.layout"></plotly-plot>
                            </div>
                        
                        </div>
                    </div>
                </div>
        </div>




        </div>
    </div>
<!--   
    <div class="columns">
        <div class="column is-2"></div>
        <div class="column">
           
                <div class='bars_title'>Counties ordered by the highest risk total &nbsp;&nbsp;&nbsp;
                   
                </div> 
                <div class="bar_header">
                    <div class="bar_header1">
                        &nbsp;
                    </div>
                    <div class="bar_header2">
                        &nbsp; &nbsp;FIPS
                    </div>
                    <div class="bar_header2">
                        Cases to date
                    </div>
                    <div class="bar_header2">
                        Deaths to date
                    </div>
                </div>
                <div class="bars_scroll">
                    <div class="columns">
                        <div class="column">
                            <div *ngFor='let factors of bar_bars'>
                                <div class='bars_plot'>
                                    <plotly-plot [data]="factors.data" [layout]="factors.layout"></plotly-plot>
                                </div>
                            
                            </div>
                        </div>
                        <div class="column">
                            <div *ngFor="let data of tot_table">
                                <div class='bars_plot_text'>
                                    {{data.countyFIPS}}
                                </div>
                            </div>
                        </div>
                        <div class="column">
                            <div *ngFor="let data of tot_table">
                                <div class='bars_plot_text'>
                                    {{data.total_cases}}
                                </div>
                            </div>
                        </div>
                        <div class="column">
                            <div *ngFor="let data of tot_table">
                                <div class='bars_plot_text'>
                                    {{data.total_deaths}}
                                </div> 
                            </div>
                        </div>
                    </div>
            </div>
        
        </div>
        <br>
      
        <div class="column is-2">
            
        
        </div>
    </div> -->
</div>



<div class='footer'>
    &copy;
</div>